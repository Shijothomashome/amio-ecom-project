<%- include('../partials/adminHeaderAndSidebar') %>

<!-- Main Content -->
<div class="main-content">
  <section class="section">
    <div class="section-header">
      <h1>Edit Category</h1>
    </div>

    <div class="section-body">

      <div class="col-md-10">
        <div class="card">
          <form action="/admin/edit-category/<%= category._id %>" method="post" id="category-form" enctype="multipart/form-data" class="needs-validation" novalidate>
            <div class="card-header">
              <h4>General Information</h4>
            </div>
            <div class="card-body">
              <div class="form-group">
                <label for="category-name">Category Name</label>
                <input id="category-name" type="text" class="form-control" name="name" value="<%= category.name %>" required>
                <div class="invalid-feedback">Please provide a category name.</div>
              </div>

              <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control" id="description" name="description" required><%= category.description %></textarea>
                <div class="invalid-feedback">Please provide a description.</div>
              </div>

              <div class="form-group">
                <label for="image-upload">Thumbnail</label>
                <div id="image-preview" class="image-preview" style="position: relative;">
                  <img id="preview-image" src="/uploads/<%= category.image %>" alt="Preview Image" style="max-width: 100%; max-height: 200px; display: block; margin: auto;">
                  <label for="image-upload" id="image-label" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">Choose File</label>
                  <input type="file" name="image" id="image-upload" class="form-control-file" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0;">
                </div>
              </div>
              

            </div>
            <div class="card-footer text-right">
              <button type="submit" class="btn btn-primary">Update</button>
            </div>
          </form>
        </div>
      </div>

    </div>
  </section>
</div>

<%- include('../partials/adminFooter') %>

<script>
  // for image preview
  document.getElementById('image-upload').addEventListener('change', function (event) {
    const previewImage = document.getElementById('preview-image');
    const file = event.target.files[0];
    if (file) {
      previewImage.src = URL.createObjectURL(file);
      previewImage.style.display = 'block';
    } else {
      previewImage.src = '';
    }
  });

</script>
